<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<!-- jquery-->
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

<script>
    $(function(){

        $(".house").on("click", update );


    });

    // javascript - innerHTML , jquery - html()
    // innerHTML="<input>" , html("<input>")
    // innerHTML 과  html() 은  덮어쓰기 형태로 추가 한다.( 기존의 내용삭제)

    // a 라는 함수안에 변수의 값을  b라는 함수에서 사용하려면
    //  b함수의 매개변수를 통해 전달하거나,  
    //  전역변수를 통해 사용가능하게 한다.

    // on("이벤트명" , 이벤트발생시 실행할 함수 );
    // 이벤트 발생시 함수는 익명함수(function(){}) 이거나 함수명 만 작성

    // input type이 날자 또는 시간 형식일경우에 
    // value 값은 형태가 2023-12-01 11:09 형식이다.
    // 즉 input type=date value='2023-12-01' 이 되어야 한다 .
    function update(){
        var td = $(this);  // 클릭한 td 태그
        var td_text = td.text();  // 클릭한 td 태그안의 텍스트 
        var type="text";
        
        if (td.hasClass("date") ) 
        //12.1 -> 12 1 -> 2023 + 12 + 1 -> 2023-12-01
        type="date";
        td_ttext = changeDate(td_text);
    
        
            let month = date.split(".")[0];
            let day = date.split(".")[1];
    }
        //td.removeClass("house"); //removeClass(삭제 할 클래스명 )
        //td.addClass("change"); // addClass(추가 할 클래스명)

        td.html(`<input type='${text}' value='${td_text}'> 
                 <button class='modify'>수정</button>`);
        $(".change>.modify").on("click", function(){
            save( td );
        });
// 내용이 복잡 해지는 경우 분할 하여 코드가 한곳에 집중 되는 것을 방지한다.
// 코드가 한곳에 집중되어 작성되면 개발자 입장에서 코드를 파악하기 힘드랃.
// 코드를 정리 하여 작성하는 것 개발자가 가져야할 습관중 하나이다 .

        function changeDate(date){
       // td_text = "2023-"+td_text.split(".")[0] +"-"+ td_text.split(".")[1];
        let month = digits( date.split(".")[0]);
        let day = digits( date.split(".")[1]);
        

        return "2023-" +month+"-"+day 
        
        if( month.length ==1 ) month= "0"+month;
        if( day.lenght ==1 ) day = "0"+day;
    }
// 중복 적으로 코드가 용되는경우 함수로 구현 한다.
    function digits( num ){
        if(num. length ==1)
            num = "0"+num;
        return num;
    }
    
    
    
    function save( t ){ // 수정버튼 클릭이벤트 등록시 td를 t변수로 전달받음
        var text = t.children("input").val(); // input 태그에 작성된 텍스트
        t.text( text );
        

    }

</script>


</head>
<body>

<div id="wrap">
    <table>
        <thead>
            <tr>
                <th>일</th>
                <th>내역</th>
                <th>지출</th>
                <th>결제방법</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="house date" >12.1</td>
                <td class="house detail">편의점(음료)</td>
                <td class="house expense">2300</td>
                <td class="house payment">카카오체크카드</td>
            </tr>
            <tr>
                <td class="house date">12.4</td>
                <td class="house detail">돈가스</td>
                <td class="house expense">7000</td>
                <td class="house payment">우리체크카드</td>
            </tr>
            <tr>
                <td class="house date">12.5</td>
                <td class="house detail">커피</td>
                <td class="house expense">3000</td>
                <td class="house payment">우리체크카드</td>
            </tr>
        </tbody>
    </table>
</div>

</body>
</html>